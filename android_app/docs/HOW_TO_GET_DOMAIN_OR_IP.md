# Как получить доменное имя или IP адрес для удаленного доступа

## Вариант 1: Узнать текущий публичный IP адрес

### Способ 1: Через веб-сайты
Откройте в браузере один из сервисов:
- https://whatismyipaddress.com
- https://myip.com
- https://2ip.ru
- https://ifconfig.me

Скопируйте показанный IP адрес (IPv4).

### Способ 2: Через командную строку
```bash
# Windows
curl ifconfig.me

# Linux/Mac
curl ifconfig.me
# или
curl icanhazip.com
```

### Способ 3: Через роутер
1. Войдите в панель управления роутером (обычно 192.168.1.1 или 192.168.0.1)
2. Найдите раздел "Статус" или "WAN"
3. Посмотрите "WAN IP" или "Публичный IP"

**⚠️ Важно:** 
- Публичный IP может меняться при переподключении к интернету
- Для постоянного доступа лучше использовать DDNS (см. ниже)

---

## Вариант 2: Настроить DDNS (Динамический DNS)

DDNS автоматически обновляет доменное имя при изменении IP адреса.

### Бесплатные DDNS сервисы:

#### 1. DuckDNS (Рекомендуется) ⭐
**Сайт:** https://www.duckdns.org

**Настройка:**
1. Зарегистрируйтесь через Google/GitHub/Twitter
2. Создайте поддомен (например: `mycolumn.duckdns.org`)
3. Получите токен
4. Настройте обновление IP (см. ниже)

**Обновление IP:**
```bash
# Вручную (можно добавить в cron)
curl "https://www.duckdns.org/update?domains=mycolumn&token=YOUR_TOKEN&ip="
```

**Настройка на роутере:**
- Многие роутеры поддерживают DuckDNS в настройках DDNS
- Введите токен и домен в разделе "DDNS" или "Динамический DNS"

---

#### 2. No-IP
**Сайт:** https://www.noip.com

**Настройка:**
1. Зарегистрируйтесь (бесплатный аккаунт)
2. Создайте хост (например: `mycolumn.ddns.net`)
3. Подтвердите email
4. Настройте обновление IP

**Обновление IP:**
- Установите DUC (Dynamic Update Client) на компьютер
- Или используйте встроенную поддержку в роутере

---

#### 3. FreeDNS (afraid.org)
**Сайт:** https://freedns.afraid.org

**Настройка:**
1. Зарегистрируйтесь
2. Выберите поддомен из списка доступных
3. Настройте обновление через скрипт

---

#### 4. Dynu
**Сайт:** https://www.dynu.com

**Особенности:**
- Бесплатный аккаунт
- Поддержка на многих роутерах
- API для обновления

---

## Вариант 3: Настройка на роутере

Большинство современных роутеров поддерживают DDNS:

1. **Войдите в панель управления роутером**
   - Обычно: http://192.168.1.1 или http://192.168.0.1
   - Логин/пароль: см. наклейку на роутере или инструкцию

2. **Найдите раздел "DDNS" или "Динамический DNS"**
   - Может быть в "Интернет" → "DDNS"
   - Или "Расширенные настройки" → "DDNS"

3. **Выберите провайдера DDNS**
   - DuckDNS, No-IP, Dynu и др.

4. **Введите данные:**
   - Доменное имя (например: `mycolumn.duckdns.org`)
   - Токен/пароль (из настроек DDNS сервиса)

5. **Сохраните и включите**

Роутер будет автоматически обновлять IP адрес при его изменении.

---

## Вариант 4: Статический IP адрес

Если у вас статический IP (обычно платная услуга у провайдера):

1. **Узнайте у провайдера ваш статический IP**
2. **Используйте его напрямую** в приложении
3. **Настройте проброс портов** на роутере (см. ниже)

---

## Настройка проброса портов (Port Forwarding)

Для доступа из интернета нужно пробросить порт на роутере:

1. **Войдите в панель управления роутером**

2. **Найдите раздел "Port Forwarding" или "Виртуальные серверы"**
   - Может быть в "Безопасность" → "Port Forwarding"
   - Или "Расширенные настройки" → "NAT"

3. **Добавьте правило:**
   - **Внешний порт:** 80 (HTTP) или 443 (HTTPS)
   - **Внутренний IP:** IP адрес ESP32 в локальной сети (например: 192.168.1.100)
   - **Внутренний порт:** 80 (или тот, на котором работает ESP32)
   - **Протокол:** TCP
   - **Имя:** Smart-Column S3

4. **Сохраните**

**Пример настройки:**
```
Внешний порт: 8080 → Внутренний IP: 192.168.1.100, Порт: 80
```
Тогда в приложении используйте: `your-domain.com:8080`

---

## Проверка доступности

После настройки проверьте доступность:

### Через браузер:
```
http://your-domain.com
# или
http://your-ip-address
```

### Через командную строку:
```bash
# Проверка доступности
ping your-domain.com

# Проверка порта
telnet your-domain.com 80
# или
curl http://your-domain.com/api/status
```

---

## Безопасность

⚠️ **ВАЖНО:** При открытии доступа из интернета:

1. **Используйте HTTPS** (настройте SSL на ESP32)
2. **Включите HTTP Basic Auth** в настройках ESP32
3. **Используйте сложный пароль**
4. **Рассмотрите VPN** как более безопасную альтернативу

---

## Рекомендуемый порядок действий

1. ✅ Настройте DDNS (DuckDNS - самый простой)
2. ✅ Настройте проброс портов на роутере
3. ✅ Настройте HTTPS на ESP32 (опционально, но рекомендуется)
4. ✅ Включите HTTP Basic Auth на ESP32
5. ✅ Добавьте устройство в приложение с доменным именем

---

## Примеры использования в приложении

### С DDNS:
- **Хост:** `mycolumn.duckdns.org`
- **Порт:** `80` (HTTP) или `443` (HTTPS)
- **HTTPS:** Включить, если настроен SSL

### С публичным IP:
- **Хост:** `123.45.67.89` (ваш публичный IP)
- **Порт:** `8080` (если проброшен нестандартный порт)
- **HTTPS:** Включить, если настроен SSL

### С VPN:
- **Хост:** `192.168.100.50` (IP в VPN сети)
- **Порт:** `80`
- **HTTPS:** Не обязательно (VPN уже шифрует трафик)


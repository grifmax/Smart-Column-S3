# –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

## üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (—Å–æ–∑–¥–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–≠—Ç–∏ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `cloud_proxy/`:

1. **auth_web.php** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
2. **login.php** - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
3. **web_settings_api.php** - API –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ ESP32
4. **esp32_config.php** - —Ñ—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ ESP32 (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)

## üîÑ –§–∞–π–ª—ã –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (–∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

–≠—Ç–∏ —Ñ–∞–π–ª—ã —É–∂–µ –µ—Å—Ç—å, –Ω–æ –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏:

1. **proxy.php** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. **.htaccess** - —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è)

## ‚úèÔ∏è –§–∞–π–ª—ã –¥–ª—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤ data/ –ø–µ—Ä–µ–¥ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º)

–≠—Ç–∏ —Ñ–∞–π–ª—ã –Ω—É–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `data/`, –∑–∞—Ç–µ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤ `cloud_proxy/web/`:

### 1. data/index.html

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:** 
- –û—Ç–∫—Ä—ã—Ç—å `data/index.html`
- –ù–∞–π—Ç–∏ –∫–∞—Ä—Ç–æ—á–∫—É WiFi (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 268-278)
- –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã–≤–∞—é—â–µ–≥–æ `</div>` –∫–∞—Ä—Ç–æ—á–∫–∏ WiFi –≤—Å—Ç–∞–≤–∏—Ç—å –∫–æ–¥ –∏–∑ `ESP32_SETTINGS_HTML.txt`

**–ì–¥–µ –≤—Å—Ç–∞–≤–∏—Ç—å:** –ü–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 278 (–ø–æ—Å–ª–µ `</div>` –∫–∞—Ä—Ç–æ—á–∫–∏ WiFi, –ø–µ—Ä–µ–¥ –∫–∞—Ä—Ç–æ—á–∫–æ–π MQTT)

### 2. data/app.js

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**
- –û—Ç–∫—Ä—ã—Ç—å `data/app.js`
- –í –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –∏–∑ `web_esp32_settings.js`
- –í —Ñ—É–Ω–∫—Ü–∏–∏ `DOMContentLoaded` (–ø—Ä–∏–º–µ—Ä–Ω–æ —Å—Ç—Ä–æ–∫–∞ 21-34) –¥–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤:
  ```javascript
  loadESP32Settings();
  ```
- –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é (–º–æ–∂–Ω–æ –ø–æ—Å–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ `toggleMqttFields`):
  ```javascript
  function toggleESP32Fields() {
      const enabled = document.getElementById('esp32-enabled').checked;
      const fields = document.getElementById('esp32-fields');
      if (fields) {
          fields.style.display = enabled ? 'block' : 'none';
      }
  }
  ```

## üìã –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ data/

1. –û—Ç–∫—Ä–æ–π—Ç–µ `data/index.html` –∏ –¥–æ–±–∞–≤—å—Ç–µ HTML –∫–æ–¥ –∏–∑ `ESP32_SETTINGS_HTML.txt`
2. –û—Ç–∫—Ä–æ–π—Ç–µ `data/app.js` –∏ –¥–æ–±–∞–≤—å—Ç–µ JavaScript –∫–æ–¥ –∏–∑ `web_esp32_settings.js`

### –®–∞–≥ 2: –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª—ã –≤ web/

```bash
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ—Ç
mkdir -p cloud_proxy/web

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –∏–∑ data/ –≤ web/
cp -r data/* cloud_proxy/web/
```

–ò–ª–∏ –Ω–∞ Windows PowerShell:
```powershell
# –°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –µ—Å–ª–∏ –Ω–µ—Ç
New-Item -ItemType Directory -Force -Path cloud_proxy\web

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã
Copy-Item -Path data\* -Destination cloud_proxy\web\ -Recurse
```

### –®–∞–≥ 3: –ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä

–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–π–ª—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä `spiritcontrol.ru` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `cloud_proxy/`:

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `auth_web.php`
- `login.php`
- `web_settings_api.php`
- `esp32_config.php` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)

**–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
- `proxy.php`

**–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è:**
- `web/` (–≤—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ –≤—Å–µ–º–∏ —Ñ–∞–π–ª–∞–º–∏, –≤–∫–ª—é—á–∞—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ `index.html` –∏ `app.js`)

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∞:

```bash
chmod 644 *.php
chmod 755 cloud_proxy/
chmod 755 web/
chmod 666 esp32_config.json  # –°–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é
chmod 666 users_web.json     # –°–æ–∑–¥–∞—Å—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, –∏–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `https://spiritcontrol.ru/login.php` - –¥–æ–ª–∂–Ω–∞ –æ—Ç–∫—Ä—ã—Ç—å—Å—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞
2. –í–æ–π–¥–∏—Ç–µ —Å –ª–æ–≥–∏–Ω–æ–º `admin` –∏ –ø–∞—Ä–æ–ª–µ–º `admin`
3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏" - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∞ "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ESP32"

## üìù –í–∞–∂–Ω–æ

- –§–∞–π–ª—ã `esp32_config.json` –∏ `users_web.json` —Å–æ–∑–¥–∞–¥—É—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
- –ï—Å–ª–∏ —Ñ–∞–π–ª—ã –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `cloud_proxy/`
- –ü–æ—Å–ª–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ `data/` –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏—Ö –≤ `web/` –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä


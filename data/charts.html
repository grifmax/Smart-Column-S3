<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì—Ä–∞—Ñ–∏–∫–∏ - Smart-Column S3</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="charts-style.css">
    <script>
        // –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–º—É –∏–∑ localStorage –ø–µ—Ä–µ–¥ –æ—Ç—Ä–∏—Å–æ–≤–∫–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            if (document.body) {
                document.body.setAttribute('data-theme', savedTheme);
            } else {
                document.addEventListener('DOMContentLoaded', function() {
                    document.body.setAttribute('data-theme', savedTheme);
                });
            }
        })();
    </script>
</head>
<body>
    <div class="container">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <header>
            <div class="header-content">
                <div>
                    <h1>üìà –ì—Ä–∞—Ñ–∏–∫–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏</h1>
                    <a href="index.html" class="back-link">‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é</a>
                </div>
                <div class="status-bar">
                    <span id="connection-status" class="status-dot offline">‚óè</span>
                    <span id="connection-text">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...</span>
                    <span class="uptime">Uptime: <span id="uptime">--:--:--</span></span>
                </div>
            </div>
        </header>

        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞–º–∏ -->
        <div class="chart-controls">
            <div class="control-panel">
                <div class="control-group-inline">
                    <label><strong>–ü–µ—Ä–∏–æ–¥:</strong></label>
                    <button class="btn btn-sm period-btn active" data-period="60">1 –º–∏–Ω</button>
                    <button class="btn btn-sm period-btn" data-period="300">5 –º–∏–Ω</button>
                    <button class="btn btn-sm period-btn" data-period="900">15 –º–∏–Ω</button>
                    <button class="btn btn-sm period-btn" data-period="3600">1 —á–∞—Å</button>
                    <button class="btn btn-sm period-btn" data-period="0">–í—Å—ë</button>
                </div>
                <div class="control-group-inline">
                    <button class="btn btn-sm" onclick="pauseCharts()">‚è∏Ô∏è –ü–∞—É–∑–∞</button>
                    <button class="btn btn-sm" onclick="resumeCharts()">‚ñ∂Ô∏è –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
                    <button class="btn btn-sm" onclick="clearCharts()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å</button>
                    <button class="btn btn-sm btn-primary" onclick="exportCharts()">üíæ –≠–∫—Å–ø–æ—Ä—Ç PNG</button>
                </div>
            </div>
        </div>

        <!-- –ü–∞–Ω–µ–ª—å –º–∞—Ä–∫–µ—Ä–æ–≤ –∞–Ω–æ–º–∞–ª–∏–π -->
        <div class="card" style="margin-bottom: 20px;">
            <h2>‚ö†Ô∏è –ú–∞—Ä–∫–µ—Ä—ã –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –Ω–æ—Ä–º—ã</h2>
            <div class="anomaly-controls">
                <div class="control-group-inline">
                    <label class="switch-label">
                        <input type="checkbox" id="anomaly-toggle">
                        <span>–í–∫–ª—é—á–∏—Ç—å –º–∞—Ä–∫–µ—Ä—ã</span>
                    </label>
                </div>
                <div class="control-group-inline">
                    <label><strong>–ü–æ—Ä–æ–≥ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è:</strong></label>
                    <input type="range" id="anomaly-threshold" min="5" max="50" value="15" step="5" style="width: 200px;">
                    <span id="anomaly-threshold-value" style="min-width: 40px; display: inline-block; font-weight: bold;">15%</span>
                </div>
                <div class="control-group-inline">
                    <label><strong>–û–∫–Ω–æ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏—è:</strong></label>
                    <select id="anomaly-window" class="select-sm">
                        <option value="60">1 –º–∏–Ω—É—Ç–∞</option>
                        <option value="180">3 –º–∏–Ω—É—Ç—ã</option>
                        <option value="300" selected>5 –º–∏–Ω—É—Ç</option>
                        <option value="600">10 –º–∏–Ω—É—Ç</option>
                        <option value="900">15 –º–∏–Ω—É—Ç</option>
                    </select>
                </div>
                <div style="margin-top: 10px; padding: 10px; background-color: var(--bg-secondary); border-radius: 5px; font-size: 0.9em;">
                    <strong>‚ÑπÔ∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:</strong> –ú–∞—Ä–∫–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–∞—Ö, –∫–æ–≥–¥–∞ —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è
                    –æ—Ç —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –æ–∫–Ω–æ –≤—Ä–µ–º–µ–Ω–∏ –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ—Ä–æ–≥. –ú–∞—Ä–∫–µ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è.
                </div>
            </div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 1: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã</h2>
                <div class="chart-checkboxes">
                    <label><input type="checkbox" id="check-temp-cube" checked> –ö—É–±</label>
                    <label><input type="checkbox" id="check-temp-column-bottom" checked> –¶–∞—Ä–≥–∞ –Ω–∏–∑</label>
                    <label><input type="checkbox" id="check-temp-column-top" checked> –¶–∞—Ä–≥–∞ –≤–µ—Ä—Ö</label>
                    <label><input type="checkbox" id="check-temp-reflux" checked> –î–µ—Ñ–ª–µ–≥–º–∞—Ç–æ—Ä</label>
                    <label><input type="checkbox" id="check-temp-tsa" checked> –¢–°–ê</label>
                    <label><input type="checkbox" id="check-temp-water-in"> –í–æ–¥–∞ –≤—Ö–æ–¥</label>
                    <label><input type="checkbox" id="check-temp-water-out"> –í–æ–¥–∞ –≤—ã—Ö–æ–¥</label>
                </div>
            </div>
            <div id="chart-temperatures" class="chart"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 2: –î–∞–≤–ª–µ–Ω–∏–µ -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>üìà –î–∞–≤–ª–µ–Ω–∏–µ</h2>
                <div class="chart-checkboxes">
                    <label><input type="checkbox" id="check-pressure-cube" checked> –ö—É–± (–º–º —Ä—Ç.—Å—Ç.)</label>
                    <label><input type="checkbox" id="check-pressure-atm" checked> –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω–æ–µ (–≥–ü–∞)</label>
                    <label><input type="checkbox" id="check-pressure-flood"> –ü–æ—Ä–æ–≥ –∑–∞—Ö–ª—ë–±–∞</label>
                </div>
            </div>
            <div id="chart-pressure" class="chart"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 3: –ú–æ—â–Ω–æ—Å—Ç—å PZEM-004T -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>‚ö° –≠–ª–µ–∫—Ç—Ä–æ–ø–∏—Ç–∞–Ω–∏–µ (PZEM-004T)</h2>
                <div class="chart-checkboxes">
                    <label><input type="checkbox" id="check-power-voltage" checked> –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ (V)</label>
                    <label><input type="checkbox" id="check-power-current" checked> –¢–æ–∫ (A)</label>
                    <label><input type="checkbox" id="check-power-power" checked> –ú–æ—â–Ω–æ—Å—Ç—å (W)</label>
                    <label><input type="checkbox" id="check-power-energy"> –≠–Ω–µ—Ä–≥–∏—è (–∫–í—Ç¬∑—á)</label>
                    <label><input type="checkbox" id="check-power-frequency"> –ß–∞—Å—Ç–æ—Ç–∞ (–ì—Ü)</label>
                    <label><input type="checkbox" id="check-power-pf"> PF</label>
                </div>
            </div>
            <div id="chart-power" class="chart"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 4: –ù–∞—Å–æ—Å –∏ –æ—Ç–±–æ—Ä -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>üíß –ù–∞—Å–æ—Å –∏ –æ—Ç–±–æ—Ä</h2>
                <div class="chart-checkboxes">
                    <label><input type="checkbox" id="check-pump-speed" checked> –°–∫–æ—Ä–æ—Å—Ç—å (–º–ª/—á)</label>
                    <label><input type="checkbox" id="check-pump-volume" checked> –ù–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º (–º–ª)</label>
                </div>
            </div>
            <div id="chart-pump" class="chart"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 5: –ö—Ä–µ–ø–æ—Å—Ç—å -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>üç∑ –≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∞—Ä–µ–æ–º–µ—Ç—Ä</h2>
            </div>
            <div id="chart-abv" class="chart"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ 6: –§—Ä–∞–∫—Ü–∏–∏ (—Å—Ç–æ–ª–±—á–∞—Ç—ã–π) -->
        <div class="card chart-card">
            <div class="chart-header">
                <h2>üìä –û–±—ä—ë–º—ã —Ñ—Ä–∞–∫—Ü–∏–π</h2>
            </div>
            <div id="chart-fractions" class="chart-bar"></div>
        </div>

        <!-- –§—É—Ç–µ—Ä -->
        <footer>
            <p>Smart-Column S3 v1.0 | –ì—Ä–∞—Ñ–∏–∫–∏: ApexCharts</p>
        </footer>
    </div>

    <!-- ApexCharts –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ -->
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.45.1/dist/apexcharts.min.js"></script>
    <script src="charts.js"></script>
</body>
</html>
